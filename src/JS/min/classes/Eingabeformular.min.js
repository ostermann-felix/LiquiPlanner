import e from"./Fehlerbox.min.js";import t from"./../liqui-planner.min.js";export default class a{constructor(){this._html=this._html_generieren()}_formulardaten_holen(e){return{titel:e.target.elements.titel.value,betrag:e.target.elements.betrag.value,einnahme:e.target.elements.einnahme.checked,datum:e.target.elements.datum.valueAsDate}}_formulardaten_verarbeiten(e){return{titel:e.titel.trim(),typ:!1===e.einnahme?"ausgabe":"einnahme",betrag:100*parseFloat(e.betrag),datum:e.datum}}_formulardaten_validieren(e){let t=[];return""===e.titel&&t.push("Titel"),isNaN(e.betrag)&&t.push("Betrag"),null===e.datum&&t.push("Datum"),t}_datum_aktualisieren(){let e=document.querySelector("#datum");null!==e&&(e.valueAsDate=new Date)}_absenden_event_hinzufuegen(a){a.querySelector("#eingabeformular").addEventListener("submit",a=>{a.preventDefault();let i=this._formulardaten_verarbeiten(this._formulardaten_holen(a)),r=this._formulardaten_validieren(i);if(0===r.length){t.eintrag_hinzufuegen(i);let n=document.querySelector(".fehlerbox");null!==n&&n.remove(),a.target.reset(),this._datum_aktualisieren()}else new e("Folgende Felder wurden nicht korrekt ausgef\xfcllt:",r).anzeigen()})}_html_generieren(){let e=document.createElement("section");return e.setAttribute("id","eingabeformular-container"),e.innerHTML=`<form id="eingabeformular" action="#" method="get"></form>
        <div class="eingabeformular-zeile">
            <h1>Neue Einnahme / Ausgabe hinzuf\xfcgen</h1>
        </div>
        <div class="eingabeformular-zeile">
            <div class="titel-typ-eingabe-gruppe">
                <label for="titel">Titel</label>
                <input type="text" id="titel" form="eingabeformular" name="titel" placeholder="z.B. Einkaufen" size="10" title="Titel des Eintrags">
                <input type="radio" id="einnahme" name="typ" value="einnahme" form="eingabeformular" title="Typ des Eintrags">
                <label for="einnahme" title="Typ des Eintrags">Einnahme</label>
                <input type="radio" id="ausgabe" name="typ" value="ausgabe" form="eingabeformular" title="Typ des Eintrags" checked>
                <label for="ausgabe" title="Typ des Eintrags">Ausgabe</label>
            </div>
        </div>
        <div class="eingabeformular-zeile">
            <div class="betrag-datum-eingabe-gruppe">
                <label for="betrag">Betrag</label>
                <input type="number" id="betrag" name="betrag" form="eingabeformular" placeholder="z.B. 10,42" size="10" step="0.01" min="0.01" title="Betrag des Eintrags (max. zwei Nachkommastellen, kein â‚¬-Zeichen)">
                <label for="datum">Datum</label>
                <input type="date" id="datum" name="datum" form="eingabeformular" size="10" title="Datum des Eintrags">
            </div>
        </div>
        <div class="eingabeformular-zeile">
            <button class="standard" type="submit" form="eingabeformular">Hinzuf\xfcgen</button>
        </div>`,this._absenden_event_hinzufuegen(e),e}anzeigen(){let e=document.querySelector("#navigationsleiste");null!==e&&(e.insertAdjacentElement("afterend",this._html),this._datum_aktualisieren())}};